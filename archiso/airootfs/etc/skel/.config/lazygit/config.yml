# Aegis Linux - Lazygit Configuration
# Catppuccin Mocha theme

gui:
  # Catppuccin Mocha theme
  theme:
    activeBorderColor:
      - "#cba6f7"  # mauve
      - bold
    inactiveBorderColor:
      - "#6c7086"  # overlay0
    searchingActiveBorderColor:
      - "#f9e2af"  # yellow
      - bold
    optionsTextColor:
      - "#89b4fa"  # blue
    selectedLineBgColor:
      - "#313244"  # surface0
    selectedRangeBgColor:
      - "#313244"  # surface0
    cherryPickedCommitBgColor:
      - "#45475a"  # surface1
    cherryPickedCommitFgColor:
      - "#cba6f7"  # mauve
    unstagedChangesColor:
      - "#f38ba8"  # red
    defaultFgColor:
      - "#cdd6f4"  # text

  # Show file icons (requires nerd font)
  showFileIcons: true

  # Show random tip on startup
  showRandomTip: false

  # Show command log
  showCommandLog: true

  # Border style
  border: rounded

  # Animation
  animateExplosion: true

  # Mouse support
  mouseEvents: true

  # Show bottom line with keybindings
  showBottomLine: true

  # Nerd fonts version
  nerdFontsVersion: "3"

git:
  # Use delta for paging
  paging:
    colorArg: always
    pager: delta --dark --paging=never

  # Commit settings
  commit:
    signOff: false

  # Merge settings
  merging:
    manualCommit: false
    args: ""

  # Pull settings
  pull:
    mode: rebase

  # Auto-fetch interval (0 = disabled)
  autoFetch: true
  autoRefresh: true

  # Branch log command
  branchLogCmd: "git log --graph --color=always --abbrev-commit --decorate --date=relative --pretty=medium {{branchName}} --"

  # All branches log command
  allBranchesLogCmd: "git log --graph --all --color=always --abbrev-commit --decorate --date=relative --pretty=medium"

  # Override with difftastic for side diffs
  difftool: ""

os:
  # Editor
  edit: "nvim {{filename}}"
  editAtLine: "nvim +{{line}} {{filename}}"
  editAtLineAndWait: "nvim +{{line}} {{filename}}"
  editInTerminal: true

  # Open in file manager
  open: "xdg-open {{filename}}"
  openLink: "xdg-open {{link}}"

refresher:
  # Refresh rate (ms)
  refreshInterval: 10
  fetchInterval: 60

update:
  # Check for updates
  method: never

confirmOnQuit: false

# Keybinding customization
keybinding:
  universal:
    quit: q
    quit-alt1: <c-c>
    return: <esc>
    quitWithoutChangingDirectory: Q
    togglePanel: <tab>
    prevItem: <up>
    nextItem: <down>
    prevItem-alt: k
    nextItem-alt: j
    prevPage: ","
    nextPage: "."
    scrollLeft: H
    scrollRight: L
    gotoTop: <
    gotoBottom: ">"
    toggleRangeSelect: v
    rangeSelectDown: <s-down>
    rangeSelectUp: <s-up>
    prevBlock: <left>
    nextBlock: <right>
    prevBlock-alt: h
    nextBlock-alt: l
    nextMatch: "n"
    prevMatch: "N"
    startSearch: /
    optionMenu: x
    optionMenu-alt1: "?"
    select: <space>
    goInto: <enter>
    confirm: <enter>
    remove: d
    new: "n"
    edit: e
    openFile: o
    scrollUpMain: <pgup>
    scrollDownMain: <pgdown>
    scrollUpMain-alt1: K
    scrollDownMain-alt1: J
    scrollUpMain-alt2: <c-u>
    scrollDownMain-alt2: <c-d>
    executeCustomCommand: ":"
    createRebaseOptionsMenu: m
    pushFiles: P
    pullFiles: p
    refresh: R
    createPatchOptionsMenu: <c-p>
    nextTab: "]"
    prevTab: "["
    nextScreenMode: +
    prevScreenMode: _
    undo: z
    redo: <c-z>
    filteringMenu: <c-s>
    diffingMenu: W
    diffingMenu-alt: <c-e>
    copyToClipboard: <c-o>
    openRecentRepos: <c-r>
    submitEditorText: <enter>
    extrasMenu: "@"
    toggleWhitespaceInDiffView: <c-w>
    increaseContextInDiffView: "}"
    decreaseContextInDiffView: "{"

customCommands:
  # Quick fixup commit
  - key: "F"
    command: "git commit --fixup={{.SelectedLocalCommit.Sha}}"
    context: "commits"
    loadingText: "Creating fixup commit..."

  # Interactive rebase with autosquash
  - key: "A"
    command: "git rebase -i --autosquash {{.SelectedLocalCommit.Sha}}^"
    context: "commits"
    loadingText: "Rebasing..."

  # Push force with lease
  - key: "<c-p>"
    command: "git push --force-with-lease"
    context: "global"
    loadingText: "Force pushing with lease..."

  # Fetch all remotes
  - key: "F"
    command: "git fetch --all --prune"
    context: "remotes"
    loadingText: "Fetching all remotes..."

  # Open in GitHub/GitLab
  - key: "O"
    command: "gh repo view --web || glab repo view --web"
    context: "global"
    loadingText: "Opening in browser..."

  # Create PR/MR
  - key: "<c-n>"
    command: "gh pr create --fill --web || glab mr create --fill --web"
    context: "localBranches"
    loadingText: "Creating PR/MR..."

  # View PR/MR for current branch
  - key: "<c-v>"
    command: "gh pr view --web || glab mr view --web"
    context: "localBranches"
    loadingText: "Opening PR/MR..."
