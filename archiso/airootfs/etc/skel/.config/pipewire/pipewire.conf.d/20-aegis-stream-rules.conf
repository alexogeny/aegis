# Aegis Linux - Automatic Stream Routing Rules
# Routes applications to appropriate virtual sinks based on app name/binary
# Uses PipeWire's native stream.rules for reliable automatic routing

pulse.rules = [
    #
    # Music & Media Applications -> music-media-sink
    #
    {
        matches = [ { application.name = "~[Ss]potify.*" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.process.binary = "spotify" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "vlc" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "mpv" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "~[Rr]hythmbox.*" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "~[Cc]lementine.*" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "~[Aa]udacious.*" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "~[Ll]ollypop.*" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "~[Ss]trawberry.*" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "Amberol" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "Celluloid" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.name = "Totem" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }
    {
        matches = [ { application.process.binary = "cmus" } ]
        actions = { update-props = { target.object = "music-media-sink" } }
    }

    #
    # Voice/Video Chat Applications -> voice-chat-sink
    #
    {
        matches = [ { application.name = "~[Dd]iscord.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.process.binary = "~[Dd]iscord.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Ss]lack.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.process.binary = "slack" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Zz]oom.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~.*[Tt]eams.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Ss]kype.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Tt]elegram.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Ss]ignal.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Ee]lement.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Nn]heko.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Ff]ractal.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Mm]umble.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.name = "~[Tt]eamspeak.*" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }
    {
        matches = [ { application.process.binary = "WebCord" } ]
        actions = { update-props = { target.object = "voice-chat-sink" } }
    }

    #
    # Games -> game-audio-sink
    #
    {
        matches = [ { application.name = "~[Ss]team.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.process.binary = "~steam.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.name = "gamescope" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Ll]utris.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Hh]eroic.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Bb]ottles.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Mm]inecraft.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    # Wine/Proton games
    {
        matches = [ { application.process.binary = "~wine.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.process.binary = "~proton.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    {
        matches = [ { application.process.binary = "~pressure-vessel.*" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }
    # Common game binary names
    {
        matches = [ { application.process.binary = "~.*\\.exe$" } ]
        actions = { update-props = { target.object = "game-audio-sink" } }
    }

    #
    # Web Browsers -> browser-audio-sink
    #
    {
        matches = [ { application.name = "~[Ff]irefox.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.process.binary = "firefox" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Cc]hromium.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.name = "~.*[Cc]hrome.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Bb]rave.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Vv]ivaldi.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Oo]pera.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Ll]ibrewolf.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }
    {
        matches = [ { application.name = "~[Zz]en.*" } ]
        actions = { update-props = { target.object = "browser-audio-sink" } }
    }

    #
    # System sounds -> system-sounds-sink
    #
    {
        matches = [ { media.role = "event" } ]
        actions = { update-props = { target.object = "system-sounds-sink" } }
    }
    {
        matches = [ { media.role = "notification" } ]
        actions = { update-props = { target.object = "system-sounds-sink" } }
    }
    {
        matches = [ { application.name = "notify-osd" } ]
        actions = { update-props = { target.object = "system-sounds-sink" } }
    }
    {
        matches = [ { application.name = "swaync" } ]
        actions = { update-props = { target.object = "system-sounds-sink" } }
    }
    {
        matches = [ { application.name = "mako" } ]
        actions = { update-props = { target.object = "system-sounds-sink" } }
    }
]
