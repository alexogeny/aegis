# Aegis Linux - GRUB Configuration Module
# SPDX-FileCopyrightText: no
# SPDX-License-Identifier: CC0-1.0

# Additional kernel parameters
overwrite: true

# Kernel command line additions
# Security-focused boot parameters
kernel_params:
    - "quiet"
    - "loglevel=3"
    - "lsm=landlock,lockdown,yama,integrity,apparmor,bpf"
    - "audit=1"
    - "pti=on"
    - "spectre_v2=on"
    - "spec_store_bypass_disable=on"
    - "l1tf=full,force"
    - "mds=full,nosmt"
    - "tsx=off"
    - "nosmt=force"
    - "kvm.nx_huge_pages=force"
    - "random.trust_cpu=off"
    - "random.trust_bootloader=off"
    - "iommu=force"
    - "intel_iommu=on"
    - "amd_iommu=force_isolation"
    - "efi=disable_early_pci_dma"
    - "slab_nomerge"
    - "init_on_alloc=1"
    - "init_on_free=1"
    - "page_alloc.shuffle=1"
    - "vsyscall=none"
    - "debugfs=off"
    - "lockdown=confidentiality"

# Enable LUKS support
cryptodisk: true
