# Aegis Linux - NVIDIA Module Configuration
# =============================================================================
# Configuration for NVIDIA open kernel modules with Hyprland/Wayland support
# =============================================================================

# Enable DRM kernel mode setting (required for Wayland)
options nvidia_drm modeset=1

# Enable framebuffer device (helps with boot and console)
options nvidia_drm fbdev=1

# Use Page Attribute Table for improved memory performance
options nvidia NVreg_UsePageAttributeTable=1

# Preserve video memory allocations during suspend/resume
# Required for proper suspend/resume with NVIDIA
options nvidia NVreg_PreserveVideoMemoryAllocations=1

# Enable Wayland support
options nvidia NVreg_EnableGpuFirmware=0

# Temporary files path (use tmpfs for better performance)
options nvidia NVreg_TemporaryFilePath=/var/tmp

# Power management settings
# Enable runtime power management for laptop GPUs
options nvidia NVreg_DynamicPowerManagement=0x02
