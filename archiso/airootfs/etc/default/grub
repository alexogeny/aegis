# Aegis Linux - GRUB Configuration
# =============================================================================

# Default boot entry
GRUB_DEFAULT=0

# Timeout before default entry boots
GRUB_TIMEOUT=5

# Timeout style (menu, countdown, hidden)
GRUB_TIMEOUT_STYLE=menu

# Distributor ID
GRUB_DISTRIBUTOR="Aegis Linux"

# Default kernel parameters
GRUB_CMDLINE_LINUX_DEFAULT="quiet loglevel=3 splash"

# Security-focused kernel parameters
GRUB_CMDLINE_LINUX="lsm=landlock,lockdown,yama,integrity,apparmor,bpf audit=1 pti=on spectre_v2=on spec_store_bypass_disable=on l1tf=full,force mds=full,nosmt tsx=off nosmt=force kvm.nx_huge_pages=force random.trust_cpu=off random.trust_bootloader=off iommu=force intel_iommu=on amd_iommu=force_isolation efi=disable_early_pci_dma slab_nomerge init_on_alloc=1 init_on_free=1 page_alloc.shuffle=1 vsyscall=none debugfs=off lockdown=confidentiality"

# Preload modules
GRUB_PRELOAD_MODULES="part_gpt part_msdos"

# Enable os-prober
GRUB_DISABLE_OS_PROBER=false

# Terminal output
GRUB_TERMINAL_INPUT=console
GRUB_TERMINAL_OUTPUT=gfxterm

# Graphics mode
GRUB_GFXMODE=auto
GRUB_GFXPAYLOAD_LINUX=keep

# Enable LUKS/cryptodisk support
GRUB_ENABLE_CRYPTODISK=y

# Disable recovery menu entries
GRUB_DISABLE_RECOVERY=true

# Disable submenu
GRUB_DISABLE_SUBMENU=y
