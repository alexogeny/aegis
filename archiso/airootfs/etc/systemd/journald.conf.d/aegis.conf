# Aegis Linux - Journald Configuration
# =============================================================================
# Secure and efficient logging configuration
# =============================================================================

[Journal]
# Store logs persistently on disk
Storage=persistent

# Compress logs to save space
Compress=yes

# Seal journal files for tamper detection (requires FSS keys)
Seal=yes

# Split journals per user
SplitMode=uid

# Rate limiting to prevent log flooding attacks
RateLimitIntervalSec=30s
RateLimitBurst=10000

# Maximum disk usage for journal
# Adjust based on available disk space
SystemMaxUse=500M
SystemKeepFree=1G
SystemMaxFileSize=50M
SystemMaxFiles=100

# Runtime journal limits
RuntimeMaxUse=100M
RuntimeKeepFree=100M
RuntimeMaxFileSize=25M
RuntimeMaxFiles=50

# Maximum retention time for logs
MaxRetentionSec=1month

# Maximum size of individual log entries
MaxLevelStore=debug
MaxLevelSyslog=debug
MaxLevelKMsg=notice
MaxLevelConsole=info
MaxLevelWall=emerg

# Forward to other targets
ForwardToSyslog=no
ForwardToKMsg=no
ForwardToConsole=no
ForwardToWall=yes

# Audit messages
Audit=yes

# Line length limits
LineMax=48K

# Sync to disk frequently for critical logs
SyncIntervalSec=5m
